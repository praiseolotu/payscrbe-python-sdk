import requests

class Payscribe:
	def __init__(self, key):
		self.__key = key
		
		'''
			Instantiate HTTP fetch operations on the API endpoints
			:params key : API test key
			:type key: string
		'''
		
	def data_lookup(self, network):
		
		'''
			Lookup data plans
			:params network : The network you want to check data plans for
			:type network : string
			:return : Data plans for each or all network
			:rtype : string
		'''
		
		API_ENDPOINT = "https://www.payscribe.ng/api/lookup/data"
		headers = {
			'Authorization':'Bearer %s'%self.__key
		}
		if network.lower() == 'all':
			data = {}
			# data = {'network':}
		if network.lower() == 'mtn' or network.lower() == 'airtel' or network.lower() == 'glo' or network.lower() == '9mobile': 
			data = {'network':network}
		response = requests.post(url=API_ENDPOINT, headers=headers, data=data)
		print(response.text)
		
	def vend_data(self, plans, recipient, network):
		
		'''
			:params plan: Data plan of your choice
			:type plans: string
			:params recipient: Recipient's mobile number
			:type recipient: string
			:params network: Network provider of your choice
			:type network: string
			:return: 
		'''
		
		API_ENDPOINT = "https://www.payscribe.ng/api/v1/data/vend"
		headers = {
			'Authorization':'Bearer %s'%self.__key
		}
		data = {
			'plan':plans,
			'recipient':recipient,
			'network': network
		}
		response = requests.post(url=API_ENDPOINT, headers=headers, data=data)
		print(response.text)
		
	def recharge(self, qty, amount, display_name):
		
		'''
			Print Recharge Card pins
			:params qty: Quantity of Recharge Card
			:type qty: int
			:params amount: Amount of Recharge Card
			:type amount: int
			:params display_name: Name of network provider
			:return: 
		'''
		
		API_ENDPOINT = "https://www.payscribe.ng/api/v1/rechargecard"
		
		headers = {
			'Authorization':'Bearer %s'%self.__key
		}
		
		data = {
			'qty':qty,
			'amount':amount,
			'display_name': display_name
		}
		
		response = requests.post(url=API_ENDPOINT, headers=headers, data=data)
		print(response.text)
	def getCardPins(self, trans_id):
		pass
